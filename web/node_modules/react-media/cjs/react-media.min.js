"use strict";function _interopDefault(e){return e&&"object"==typeof e&&"default"in e?e.default:e}var React=_interopDefault(require("react"));require("prop-types");var invariant=_interopDefault(require("invariant")),json2mq=_interopDefault(require("json2mq"));function _defineProperty(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function _inheritsLoose(e,t){e.prototype=Object.create(t.prototype),(e.prototype.constructor=e).__proto__=t}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var MediaQueryList=function(){function e(e,t,i){var n=this;this.nativeMediaQueryList=e.matchMedia(t),this.active=!0,this.cancellableListener=function(){n.matches=n.nativeMediaQueryList.matches,n.active&&i.apply(void 0,arguments)},this.nativeMediaQueryList.addListener(this.cancellableListener),this.matches=this.nativeMediaQueryList.matches}return e.prototype.cancel=function(){this.active=!1,this.nativeMediaQueryList.removeListener(this.cancellableListener)},e}(),Media=function(r){function e(){for(var i,e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return _defineProperty(_assertThisInitialized(_assertThisInitialized(i=r.call.apply(r,[this].concat(t))||this)),"state",{matches:i.props.defaultMatches}),_defineProperty(_assertThisInitialized(_assertThisInitialized(i)),"updateMatches",function(){var e=i.mediaQueryList.matches;i.setState({matches:e});var t=i.props.onChange;t&&t(e)}),i}_inheritsLoose(e,r);var t=e.prototype;return t.componentWillMount=function(){if("object"==typeof window){var e=this.props.targetWindow||window;"function"!=typeof e.matchMedia&&invariant(!1);var t=this.props.query;"string"!=typeof t&&(t=json2mq(t)),this.mediaQueryList=new MediaQueryList(e,t,this.updateMatches),this.updateMatches()}},t.componentWillUnmount=function(){this.mediaQueryList.cancel()},t.render=function(){var e=this.props,t=e.children,i=e.render,n=this.state.matches;return i?n?i():null:t?"function"==typeof t?t(n):(!Array.isArray(t)||t.length)&&n?React.Children.only(t):null:null},e}(React.Component);_defineProperty(Media,"defaultProps",{defaultMatches:!0}),module.exports=Media;
