!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t(require("googleapis"));else if("function"==typeof define&&define.amd)define(["googleapis"],t);else{var n="object"==typeof exports?t(require("googleapis")):t(e.googleapis);for(var r in n)("object"==typeof exports?exports:e)[r]=n[r]}}(global,function(e){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}(n(1))},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function u(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,u)}c((r=r.apply(e,t||[])).next())})},o=this&&this.__generator||function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(i){return function(u){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,u])}}},i=this&&this.__asyncValues||function(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,n=e[Symbol.asyncIterator];return n?n.call(e):(e="function"==typeof __values?__values(e):e[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(n){t[n]=e[n]&&function(t){return new Promise(function(r,o){(function(e,t,n,r){Promise.resolve(r).then(function(t){e({value:t,done:n})},t)})(r,o,(t=e[n](t)).done,t.value)})}}};Object.defineProperty(t,"__esModule",{value:!0});var a=n(2),u=n(4),c=1e4,s=function(e){return e},l="ga:pageviews";t.fetch=function(e){var t,n;return r(this,void 0,void 0,function(){var r,f,p,h,y,d,b;return o(this,function(o){switch(o.label){case 0:r=a.getClient(e.auth,c,e.viewId,e.period,e.expression||l),f={},o.label=1;case 1:o.trys.push([1,6,7,12]),p=i(r()),o.label=2;case 2:return[4,p.next()];case 3:if((h=o.sent()).done)return[3,5];if((y=h.value).error)throw y.error;d=y.report,u.normalize(d.data,e.formatter||s,e.routes||[]).forEach(function(e){var t=f[e.from]||{};t[e.to]=e.weight+(t[e.to]||0),f[e.from]=t}),o.label=4;case 4:return[3,2];case 5:return[3,12];case 6:return b=o.sent(),t={error:b},[3,12];case 7:return o.trys.push([7,,10,11]),h&&!h.done&&(n=p.return)?[4,n.call(p)]:[3,9];case 8:o.sent(),o.label=9;case 9:return[3,11];case 10:if(t)throw t.error;return[7];case 11:return[7];case 12:return[2,f]}})})}},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function u(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,u)}c((r=r.apply(e,t||[])).next())})},o=this&&this.__generator||function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(i){return function(u){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,u])}}},i=this&&this.__await||function(e){return this instanceof i?(this.v=e,this):new i(e)},a=this&&this.__asyncGenerator||function(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,o=n.apply(e,t||[]),a=[];return r={},u("next"),u("throw"),u("return"),r[Symbol.asyncIterator]=function(){return this},r;function u(e){o[e]&&(r[e]=function(t){return new Promise(function(n,r){a.push([e,t,n,r])>1||c(e,t)})})}function c(e,t){try{(n=o[e](t)).value instanceof i?Promise.resolve(n.value.v).then(s,l):f(a[0][2],n)}catch(e){f(a[0][3],e)}var n}function s(e){c("next",e)}function l(e){c("throw",e)}function f(e,t){e(t),a.shift(),a.length&&c(a[0][0],a[0][1])}};Object.defineProperty(t,"__esModule",{value:!0});var u=function(e){return 1===e.toString().length?"0"+e:e},c=function(e){return e.getFullYear()+"-"+u(e.getMonth()+1)+"-"+u(e.getDate())};function s(e,t,n,i,a,u){return r(this,void 0,void 0,function(){return o(this,function(r){return[2,new Promise(function(r,o){e.reports.batchGet(function(e,t,n,r,o){return{auth:e,resource:{reportRequests:{pageSize:n.pageSize,pageToken:n.pageToken,viewId:t,dateRanges:[{startDate:c(r.startDate),endDate:c(r.endDate)}],dimensions:[{name:"ga:previousPagePath"},{name:"ga:pagePath"}],metrics:[{expression:o}],orderBys:[{fieldName:o,sortOrder:"DESCENDING"}]}}}}(t,n,i,a,u),function(e,t){if(e)o(e);else{var n=t.data.reports[0].nextPageToken,i=t.data.reports[0];r({report:i,nextPage:n})}})})]})})}void 0===Symbol.asyncIterator&&(Symbol.asyncIterator=Symbol.asyncIterator||Symbol("asyncIterator")),t.getClient=function(e,t,r,u,c){var l=n(3).google.analyticsreporting("v4"),f={pageSize:t,pageToken:void 0};return function(){return a(this,arguments,function(){var t,n,a;return o(this,function(o){switch(o.label){case 0:0,t={},o.label=1;case 1:return o.trys.push([1,3,,4]),[4,i(s(l,e,r,f,u,c))];case 2:return n=o.sent(),t.report=n.report,f.pageToken=n.nextPage,[3,4];case 3:return a=o.sent(),t.error=a,[3,4];case 4:return[4,i(t)];case 5:return[4,o.sent()];case 6:return o.sent(),f.pageToken?[3,0]:[3,7];case 7:return[2]}})})}}},function(t,n){t.exports=e},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.matchRoute=function(e,t){var n=e.split("/"),r=t.split("/");return n.length===r.length&&r.reduce(function(e,t,r){return t.startsWith(":")?e:e&&t===n[r]},!0)};var r=function(e,n){return r=e,o=n.split("?")[0],r.filter(function(e){return e.indexOf(":")<0}).find(function(e){return t.matchRoute(o,e)})||r.find(function(e){return t.matchRoute(o,e)})||o;var r,o};t.normalize=function(e,t,n){return(e.rows||[]).map(function(e){return{from:r(n,t(e.dimensions[0])),to:r(n,t(e.dimensions[1])),weight:parseInt(e.metrics[0].values[0],10)}}).filter(function(e){return"(entrance)"!==e.from&&e.from!==e.to})}}])});