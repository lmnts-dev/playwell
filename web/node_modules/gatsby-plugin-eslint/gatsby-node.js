"use strict";

exports.onCreateWebpackConfig = function (_ref, pluginOptions) {
  var stage = _ref.stage,
      actions = _ref.actions;

  var test = pluginOptions.test || /\.js$|\.jsx$/;
  var exclude = pluginOptions.exclude || /(node_modules|.cache|public)/;
  var options = pluginOptions.options || {};
  var stages = pluginOptions.stages || ['develop'];

  if (stages.includes(stage)) {
    actions.setWebpackConfig({
      module: {
        rules: [{
          enforce: "pre",
          test: test,
          loader: "eslint-loader",
          exclude: exclude,
          options: options
        }]
      }
    });
  }
};